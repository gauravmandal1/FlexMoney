{"ast":null,"code":"import _slicedToArray from\"C:/Users/User/OneDrive/Desktop/Flexmoney/Flex_Money/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import Loader from\"react-loader-spinner\";import{validateCardLength,validateCvvLength,validateUpi}from'../function/functions';import'../styles/Payment.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Payment(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),mode=_useState2[0],setMode=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),upiId=_useState4[0],setUpiId=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),cardName=_useState6[0],setCardName=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),expDate=_useState8[0],setExpCard=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),accountNo=_useState10[0],setAccountNo=_useState10[1];var _useState11=useState(\"\"),_useState12=_slicedToArray(_useState11,2),IFSCCode=_useState12[0],setIfscCode=_useState12[1];//Implement the CompletePayment function as provided\nvar handleAccountChange=function handleAccountChange(b){setAccountNo(b);};var handleUpiIdChange=function handleUpiIdChange(b){setUpiId(b);};var handleIfscCodeChange=function handleIfscCodeChange(b){setIfscCode(b);};var CompletePayment=function CompletePayment(){var err=\"\";if(mode=='card'&&!validateCardLength(accountNo)){err+=\"Account number is invalid\\n\";}if(mode=='upi'&&!validateUpi(upiId)){err+=\"Missing UPI Id\\n\";}if(mode=='card'&&!validateCvvLength(IFSCCode)){err+=\"Invalid CVV number\\n\";}if(err.length==0){fetch('https://flexmoneyserver-production.up.railway.app/payment',{\"method\":\"post\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({\"mode\":mode,\"card\":{\"holderName\":cardName,\"expirationDate\":expDate,\"cardNo\":accountNo,\"cvvCode\":IFSCCode},\"upiId\":upiId,\"email\":localStorage.getItem(\"email\")})}).then(function(response){return response.json();})//Response from the REST API\n.then(function(responseData){var message_id=responseData.message_id;//If data is updated or stored successfully\nif(message_id==1||message_id==3){document.querySelector(\".paymentContainer\").style.display=\"none\";document.querySelector(\".completionContainer\").style.display=\"flex\";}//Else create mock up box for any other response\nelse{var message=responseData.message;window.alert(message);}}).catch(function(err){console.log(\"Error in accessing the server is \".concat(err));});}else alert('There were some errors in the filling of form:-\\n'+err);};return/*#__PURE__*/_jsxs(\"div\",{className:\"paymentContainer\",children:[/*#__PURE__*/_jsx(\"h\",{className:\"amountDisclaimer\",children:\"Amount to be paid: 500 (in Rupess)\"}),/*#__PURE__*/_jsx(\"h\",{className:\"optionsHeader\",children:\"Choose Payment mode:\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"cardDiv\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"optionDiv\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",id:\"card\",name:\"optionNo\",value:mode,onChange:function onChange(e){return setMode('card');}}),/*#__PURE__*/_jsx(\"label\",{for:\"card\",children:\"Debit/ATM Card\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"cardDetailsDiv\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"cardName\",name:\"cardName\",value:cardName,onChange:function onChange(e){return setCardName(e.target.value);},placeholder:\"Card holder's name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"expDate\",name:\"expDate\",value:expDate,onChange:function onChange(e){return setExpCard(e.target.value);},placeholder:\"Expiration date\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"accountNo\",name:\"accountNo\",value:accountNo,onChange:function onChange(e){return handleAccountChange(e.target.value);},placeholder:\"Card Number\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"IFSCCode\",name:\"IFSCCode\",value:IFSCCode,onChange:function onChange(e){return handleIfscCodeChange(e.target.value);},placeholder:\"CVV Code\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"upiDiv\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"optionDiv\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",id:\"UPI\",name:\"optionNo\",value:mode,onChange:function onChange(e){return setMode('upi');}}),/*#__PURE__*/_jsx(\"label\",{for:\"UPI\",children:\"UPI\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"UPI_ID\",name:\"upi_id\",value:upiId,onChange:function onChange(e){return handleUpiIdChange(e.target.value);},placeholder:\"UPI Id\"})]}),/*#__PURE__*/_jsxs(\"button\",{className:\"toCompletion\",onClick:CompletePayment,children:[\"Complete Payment \",/*#__PURE__*/_jsx(\"i\",{class:\"fas fa-arrow-right\"})]})]}),/*#__PURE__*/_jsx(Loader,{className:\"loader\",type:\"Puff\",color:\"#00BFFF\",height:100,width:100})]});}export default Payment;","map":{"version":3,"sources":["C:/Users/User/OneDrive/Desktop/Flexmoney/Flex_Money/client/src/Components/Payment.jsx"],"names":["React","useState","Loader","validateCardLength","validateCvvLength","validateUpi","Payment","mode","setMode","upiId","setUpiId","cardName","setCardName","expDate","setExpCard","accountNo","setAccountNo","IFSCCode","setIfscCode","handleAccountChange","b","handleUpiIdChange","handleIfscCodeChange","CompletePayment","err","length","fetch","headers","body","JSON","stringify","localStorage","getItem","then","response","json","responseData","message_id","document","querySelector","style","display","message","window","alert","catch","console","log","e","target","value"],"mappings":"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","sourcesContent":["import React,{useState} from 'react'\r\nimport Loader from \"react-loader-spinner\";\r\nimport { validateCardLength, validateCvvLength, validateUpi } from '../function/functions';\r\nimport '../styles/Payment.css'\r\nfunction Payment() {\r\n    const [mode,setMode]=useState(\"\")\r\n    const [upiId,setUpiId]=useState(\"\")\r\n    const [cardName,setCardName]=useState(\"\")\r\n    const [expDate,setExpCard]=useState(\"\")\r\n    const [accountNo,setAccountNo]=useState(\"\")\r\n    const [IFSCCode,setIfscCode]=useState(\"\")\r\n\r\n    //Implement the CompletePayment function as provided\r\n    const handleAccountChange = (b) => {\r\n        setAccountNo(b);\r\n      };\r\n      const handleUpiIdChange = (b) => {\r\n        setUpiId(b);\r\n      };\r\n      const handleIfscCodeChange = (b) => {\r\n        setIfscCode(b);\r\n      };\r\n    const CompletePayment=()=>{\r\n        \r\n        var err = \"\";\r\n        \r\n        \r\n        if (mode =='card' && !validateCardLength(accountNo)) {\r\n          err += \"Account number is invalid\\n\";\r\n        }\r\n    \r\n        if (mode =='upi' && !validateUpi(upiId)) {\r\n          err += \"Missing UPI Id\\n\";\r\n        }\r\n    \r\n        if (mode =='card' && !validateCvvLength(IFSCCode)) {\r\n          err += \"Invalid CVV number\\n\";\r\n        }\r\n        if (err.length == 0) {\r\n            fetch('https://flexmoneyserver-production.up.railway.app/payment',{\r\n              \"method\":\"post\",\r\n              headers:{\r\n                \"Content-Type\":\"application/json\"\r\n              },\r\n              body:JSON.stringify({\r\n                \"mode\":mode,\r\n                \"card\":{\r\n                    \"holderName\":cardName,\r\n                    \"expirationDate\":expDate,\r\n                    \"cardNo\":accountNo,\r\n                    \"cvvCode\":IFSCCode\r\n                },\r\n                \"upiId\":upiId,\r\n                \"email\":localStorage.getItem(\"email\")\r\n            })\r\n          }).then((response)=>response.json())\r\n          //Response from the REST API\r\n          .then((responseData)=>{\r\n               const message_id=responseData.message_id\r\n               //If data is updated or stored successfully\r\n               if(message_id==1||message_id==3){\r\n                document.querySelector(\".paymentContainer\").style.display=\"none\"\r\n                document.querySelector(\".completionContainer\").style.display=\"flex\"\r\n               }\r\n               //Else create mock up box for any other response\r\n               else{\r\n                   const message=responseData.message\r\n                   window.alert(message)\r\n               }\r\n          })\r\n          .catch((err)=>{\r\n            console.log(`Error in accessing the server is ${err}`)\r\n          })\r\n           }\r\n        else alert('There were some errors in the filling of form:-\\n' + err)\r\n      \r\n\r\n    }\r\n    return (\r\n        <div className=\"paymentContainer\">\r\n            <h className=\"amountDisclaimer\">Amount to be paid: 500 (in Rupess)</h>\r\n            <h className=\"optionsHeader\">Choose Payment mode:</h>\r\n            <div>\r\n                <div className=\"cardDiv\">\r\n                    <div className=\"optionDiv\">\r\n                    <input type=\"radio\" id=\"card\" name=\"optionNo\" \r\n                    value={mode}\r\n                    onChange={((e)=>setMode('card'))}\r\n                    />\r\n                    <label for=\"card\">Debit/ATM Card</label>\r\n                    </div>\r\n                    <div className=\"cardDetailsDiv\">\r\n                    <input type=\"text\" id=\"cardName\" name=\"cardName\"\r\n                    value={cardName}\r\n                    onChange={((e)=>setCardName(e.target.value))}\r\n                    placeholder=\"Card holder's name\"\r\n                    />\r\n                    <input type=\"text\" id=\"expDate\" name=\"expDate\"\r\n                    value={expDate}\r\n                    onChange={((e)=>setExpCard(e.target.value))}\r\n                    placeholder=\"Expiration date\"\r\n                    />\r\n                    <input type=\"text\" id=\"accountNo\" name=\"accountNo\"\r\n                    value={accountNo}\r\n                    onChange={((e)=>handleAccountChange(e.target.value))}\r\n                    placeholder=\"Card Number\"\r\n                    />\r\n                    <input type=\"password\" id=\"IFSCCode\" name=\"IFSCCode\"\r\n                    value={IFSCCode}\r\n                    onChange={((e)=>handleIfscCodeChange(e.target.value))}\r\n                    placeholder=\"CVV Code\"\r\n                    />\r\n                    </div>\r\n                </div>\r\n                <div className=\"upiDiv\">\r\n                    <div className=\"optionDiv\">\r\n                    <input type=\"radio\" id=\"UPI\" name=\"optionNo\" \r\n                    value={mode}\r\n                    onChange={((e)=>setMode('upi'))}\r\n                    />\r\n                    <label for=\"UPI\">UPI</label>\r\n                    </div>\r\n                    <input type=\"text\" id=\"UPI_ID\" name=\"upi_id\" \r\n                    value={upiId} \r\n                    onChange={((e)=>handleUpiIdChange(e.target.value))}\r\n                    placeholder=\"UPI Id\"\r\n                    />\r\n                </div>\r\n                <button className=\"toCompletion\" onClick={CompletePayment}>Complete Payment <i class=\"fas fa-arrow-right\"></i></button>\r\n            </div>\r\n            <Loader\r\n                    className=\"loader\"\r\n                    type=\"Puff\"\r\n                    color=\"#00BFFF\"\r\n                    height={100}\r\n                    width={100}\r\n            />\r\n            \r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Payment\r\n"]},"metadata":{},"sourceType":"module"}